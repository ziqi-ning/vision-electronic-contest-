# 若干须知

## 一、自启动

1. 在`\cindy\autostart`中创建文件`25.sh`

   ```bash
   #! /bin/bash

   echo _____MYstart is success,oh Yeah OvO_______
   source /opt/ros/noetic/setup.bash
   cd /home/cindy/autostart
   timestamp=$(date +"%Y-%m-%d_%H-%M-%S")
   echo $timestamp >> "/home/cindy/autostart/25.log"
   cd /home/cindy/autostart/test
   python3 gogogo.py 
   ```

2. 在`/home/cindy/.config/autostart/`中创建`25.sh.desktop`

   ```bash
   [Desktop Entry]
   Type=Application
   Exec=gnome-terminal -- bash -c /home/cindy/autostart/25.sh
   Hidden=false
   X-MATE-Autostart-enabled=true
   Name[zh_CN]=25.sh.desktop
   Name=oled
   Comment[zh_CN]=oled
   Comment=oled
   X-MATE-Autostart-Delay=3
   ```

3. 给予两个文件最高权限

   ```bash
   sudo chmod 777 xxx
   ```

   > 在各自文件路径下使用`ls`命令即可查看是否含有足够权限（绿色）


## 二、控制指令


   校验和计算：sum(0xFF + 0xFE + 0xA0 + 0x01 + mode) % 256

   模式0
   [0xFF, 0xFE, 0xA0, 0x01, 0x00, (0xFF+0xFE+0xA0+0x01+0x00) % 256]
   ```
   十六进制: FF FE A0 01 00 9E
   ```
   模式1
   [0xFF, 0xFE, 0xA0, 0x01, 0x01, (0xFF+0xFE+0xA0+0x01+0x01) % 256]
   ```
   #十六进制: FF FE A0 01 01 9F
   ```
   模式2
   [0xFF, 0xFE, 0xA0, 0x01, 0x02, (0xFF+0xFE+0xA0+0x01+0x02) % 256]
   ```
   十六进制: FF FE A0 01 02 A0
   ```
   模式3
   [0xFF, 0xFE, 0xA0, 0x01, 0x03, (0xFF+0xFE+0xA0+0x01+0x03) % 256]
   ```
   十六进制: FF FE A0 01 03 A1
   ```
   模式4
   [0xFF, 0xFE, 0xA0, 0x01, 0x04, (0xFF+0xFE+0xA0+0x01+0x04) % 256]
   ```
   十六进制: FF FE A0 01 04 A2
   ```
   模式5
   [0xFF, 0xFE, 0xA0, 0x01, 0x05, (0xFF+0xFE+0xA0+0x01+0x05) % 256]
   ```
   十六进制: FF FE A0 01 05 A3
   ```
   模式6
   [0xFF, 0xFE, 0xA0, 0x01, 0x06, (0xFF+0xFE+0xA0+0x01+0x06) % 256]
   ```
   十六进制: FF FE A0 01 06 A4
   ```
   模式7
   [0xFF, 0xFE, 0xA0, 0x01, 0x07, (0xFF+0xFE+0xA0+0x01+0x07) % 256]
   ```
   十六进制: FF FE A0 01 07 A5
   ```

# HSV颜色阈值

   ```
   红色

   红色在HSV空间中有两个范围：

   minRed1 = np.array([0, 43, 46])
   maxRed1 = np.array([10, 255, 255])
   minRed2 = np.array([156, 43, 46])
   maxRed2 = np.array([180, 255, 255])
   ```
   ```
   橙色

   minOrange = np.array([11, 43, 46])
   maxOrange = np.array([25, 255, 255])
   ```
   ```
   黄色

   minYellow = np.array([26, 43, 46])
   maxYellow = np.array([34, 255, 255])
   ```
   ```
   绿色

   minGreen = np.array([35, 43, 46])
   maxGreen = np.array([77, 255, 255])
   ```
   ```
   青色

   minCyan = np.array([78, 43, 46])
   maxCyan = np.array([99, 255, 255])
   ```
   ```
   蓝色

   minBlue = np.array([100, 43, 46])
   maxBlue = np.array([124, 255, 255])
   ```
   ```
   紫色

   minPurple = np.array([125, 43, 46])
   maxPurple = np.array([155, 255, 255])
   ```
   ```
   黑色

   minBlack = np.array([0, 0, 0])
   maxBlack = np.array([180, 255, 46])
   ```
   ```
   灰色

   minGray = np.array([0, 0, 46])
   maxGray = np.array([180, 43, 220])
   ```
   ```
   白色

   minWhite = np.array([0, 0, 221])
   maxWhite = np.array([180, 30, 255])
   ```


## 三、外设排查

1.摄像头

   检查摄像头指针，出现video0就ok
   ```
   ls /dev | grep video*
   ```
   检查摄像头驱动，需出现supported=1 和 detected=1
   ```
   vcgencmd get_camera
   ```
   检查后台占用，出现python3开头的进程（比如pid为2025，ppid来自cron说明是之前的视觉学长搞的定时自启动，后期还要取消掉）说明旧进程没死，要杀
   ```
   lsof /dev/video0
   ```
   强制杀死
   ```
   kill -9 2025
   ```
2.雷达

   检查ROS下话题/scan，有数据说明雷达运行正常
   ```
   rostopic ehco /scan
   ```
   检查飞控发出来，由ROS发布的话题/imu_fc，没有数据说明飞控没发或者格式不对，没有数据意味着建图有问题
   ```
   rostopic echo /imu_fc
   ```
3.串口

   检查所有串口激活情况，出现0-4就ok
   ```
   ls /dev | grep AMA*
   ```
   检查具体串口，看看哪个进程在用，1号是ROS节点serialport，2号是激光雷达lsn10，4号是视觉用串口。这里以检查1号为例，弹出相应进程信息说明调用正常。
   ```
   lsof /dev/ttyAMA1
   ```