# Vision Electronic Contest - 电子设计竞赛多维感知处理库

## 项目简介

本项目是一个专为电子设计竞赛准备的视觉处理库，基于OpenCV开发，主要面向树莓派、Jetson系列等支持OpenCV的嵌入式平台。项目提供了多种视觉处理功能的集成解决方案，包括颜色区域提取、几何图形识别、特定logo匹配、激光点检测以及雷达与视觉融合等功能。项目采用模块化设计，将各个视觉功能封装为独立的模块，并通过主程序实现功能整合与协同工作。

## 主要功能

### 雷达与视觉融合（原创二维平面雷达的点群算法和孤点算法）
- 激光雷达数据采集与处理
- 视觉坐标与雷达坐标转换
- 障碍物检测与距离测量
- 支持多传感器数据融合

### 通信与控制
- 串口通信协议实现
- 支持模式切换与控制指令
- 数据打包与解析功能
- 外设控制（LED灯用于肉眼观察调试状态）

### 颜色检测与识别（原创掩模过滤减轻后续计算负担）
- 支持多种颜色的HSV阈值检测（红、绿、蓝、黄等）
- 提供颜色区域提取和掩模生成功能
- 支持自定义颜色阈值和区域大小筛选

### 形状识别（单独调用+综合同时调用）
- 圆形/椭圆检测与识别
- 三角形检测与识别
- 梯形检测与识别
- 杆子/直线检测与识别
- 支持多区域形状同时识别

### 特殊标记识别
- AprilTag标签识别与位姿估计
- 二维码(QR Code)识别与解码
- 支持自定义标记检测



## 项目结构

```
vision-electronic-contest-/
├── README.md                 # 项目说明文档
├── main.py                   # 主程序入口
├── src/                      # 核心功能模块
│   ├── allin.py             # 综合功能集成
│   ├── colorblob.py         # 颜色检测模块
│   ├── facility2.py         # 外设控制模块
│   ├── other.py             # 特殊标记识别
│   ├── outsite.py           # 形状识别模块
│   ├── radar5.py            # 雷达数据处理
│   └── uartuse.py           # 串口通信模块
├── example/                  # 示例代码
│   ├── 调用案例：多区域形状识别.py
│   ├── 调用案例：多颜色掩模.py
│   ├── 调用案例：杆子检测测试.py
│   ├── 调用案例：识别激光.py
│   ├── 调用案例：遍历识别特定logo.py
│   └── 调用案例：雷达测试.py
├── util/                     # 辅助工具
│   ├── 调参工具：canny边缘调参手动器.py
│   └── 调参工具：颜色调参手动器.py
└── 若干须知.md               # 使用注意事项
```

## 安装与环境配置

### 系统要求
- Python >= 3.6
- 支持OpenCV的嵌入式平台（树莓派、Jetson系列等）
- 可选：ROS1（雷达功能需要）

### 依赖安装
```bash
# 基础依赖
pip install opencv-python numpy

# 特殊功能依赖
pip install pyzbar apriltag

# ROS1依赖（可选，用于雷达功能）
# 请参考ROS官方文档安装ROS1 Noetic或Melodic
```

### 硬件配置
- 摄像头：支持USB或CSI接口摄像头
- 雷达：镭神N10系列激光雷达（可选）
- 串口：用于与外部设备通信


## 通信协议

项目实现了完整的串口通信协议，支持模式切换和数据传输：

### 控制指令格式
```
[0xFF, 0xFE, 0xA0, 0x01, mode, checksum]
```

其中：
- `0xFF, 0xFE`: 协议头
- `0xA0, 0x01`: 功能字
- `mode`: 模式码（0-7）
- `checksum`: 校验和 = (0xFF + 0xFE + 0xA0 + 0x01 + mode) % 256

### 数据返回格式
```
[0xFF, 0xFC, 0xA0+mode, length, data..., checksum]
```

数据包含目标位置、距离、角度、AprilTag ID等多种信息。

## 调参工具

项目提供了两个实用的调参工具：

1. **颜色调参手动器**：用于调整HSV颜色阈值，实时显示检测结果
2. **Canny边缘调参手动器**：用于调整Canny边缘检测参数，优化形状识别效果

## 注意事项

1. **硬件兼容性**：确保摄像头和雷达驱动正确安装
2. **性能优化**：在嵌入式平台上运行时，可能需要调整图像分辨率和处理频率
3. **传感器标定**：雷达与视觉融合功能需要精确的传感器外参标定
4. **环境光照**：颜色检测对光照条件敏感，建议在稳定光照环境下使用

## 贡献与支持

欢迎提交Issue和Pull Request来完善项目。如果您在使用过程中遇到问题，可以通过以下方式获取帮助：

1. 查看示例代码和文档
2. 提交Issue描述问题
3. 参与项目讨论和改进

## 许可证

本项目采用开源许可证，具体请参考LICENSE文件。

---

**本项目专为电子设计竞赛设计，希望能帮助参赛者快速实现视觉功能，祝比赛顺利！**
        
